#!/bin/sh

echo "üîç Running pre-commit checks..."

# TypeScript check (non-blocking - just warnings)
echo "üìù Type checking..."
pnpm --filter @stride/frontend exec tsc --noEmit 2>/dev/null || echo "‚ö†Ô∏è TypeScript warnings in frontend (non-blocking)"
pnpm --filter @stride/mcp-server exec tsc --noEmit 2>/dev/null || echo "‚ö†Ô∏è TypeScript warnings in mcp-server (non-blocking)"

# Lint-staged
pnpm exec lint-staged

# Console.log detection (warning only)
echo "üîé Checking for console.log..."
if git diff --cached --name-only | xargs grep -l "console\.log" 2>/dev/null; then
  echo "‚ö†Ô∏è Warning: console.log found in staged files (consider using createLogger)"
fi

echo "‚úÖ Pre-commit checks passed!"
