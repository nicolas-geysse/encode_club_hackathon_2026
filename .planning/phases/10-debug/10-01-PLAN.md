---
phase: 10-debug
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - docs/bugs-dev/fix-onboarding.md
autonomous: true

must_haves:
  truths:
    - "runtime.lastError warning is documented as external browser extension issue"
    - "Certification selection has no noticeable lag from app code"
    - "Investigation findings are recorded for future reference"
  artifacts:
    - path: "docs/bugs-dev/fix-onboarding.md"
      provides: "Updated investigation results for runtime error"
      contains: "Browser extension"
  key_links: []
---

<objective>
Investigate and document the runtime.lastError warning during certification selection.

Purpose: Close out the "Fix Onboarding" milestone by investigating the reported runtime error. The error "Unchecked runtime.lastError: A listener indicated an asynchronous response" is a classic Chrome extension message-passing warning, not an application bug. This plan confirms the source and documents findings.

Output: Updated bug documentation with investigation results and resolution status.
</objective>

<execution_context>
@/home/nico/.claude/get-shit-done/workflows/execute-plan.md
@/home/nico/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md

# Key source files
@packages/frontend/src/components/chat/GridMultiSelect.tsx
@packages/frontend/src/components/chat/OnboardingFormStep.tsx

# Bug documentation
@docs/bugs-dev/fix-onboarding.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Verify runtime.lastError is browser extension issue</name>
  <files>packages/frontend/src/components/chat/GridMultiSelect.tsx, packages/frontend/src/components/chat/OnboardingFormStep.tsx</files>
  <action>
    Search the frontend codebase for any usage of Chrome extension APIs (`chrome.runtime`, `browser.runtime`, `chrome.tabs`, etc.). These APIs are the source of "runtime.lastError" warnings.

    Expected finding: No extension APIs are used in the app code. The warning comes from browser extensions (password managers, ad blockers, React DevTools, etc.) that intercept DOM events during chip selection.

    1. Grep for `chrome\.` and `browser\.` patterns in frontend/src/
    2. Check GridMultiSelect.tsx for any async patterns that could cause extension interference
    3. Check OnboardingFormStep.tsx for async handlers in certification selection flow

    Document findings as investigation notes.
  </action>
  <verify>Search commands return no matches for Chrome extension APIs in app code</verify>
  <done>Confirmed that app code does not use Chrome extension APIs</done>
</task>

<task type="auto">
  <name>Task 2: Check for performance issues in GridMultiSelect</name>
  <files>packages/frontend/src/components/chat/GridMultiSelect.tsx</files>
  <action>
    Review the GridMultiSelect component for potential performance issues that could cause lag during selection:

    1. Check filter function - should be O(n) with no expensive operations
    2. Check toggleItem function - should be O(n) for includes check
    3. Verify no unnecessary re-renders (SolidJS handles this well by default)
    4. Check if there are excessive DOM nodes being created

    The current implementation looks efficient:
    - Simple string filter on options array
    - Standard array manipulation for selection
    - No heavy computations or async operations

    If lag is present, it's likely from extension interference, not app code.
  </action>
  <verify>GridMultiSelect has no obvious performance anti-patterns</verify>
  <done>GridMultiSelect component is performant and lag-free from app perspective</done>
</task>

<task type="auto">
  <name>Task 3: Update bug documentation with investigation results</name>
  <files>docs/bugs-dev/fix-onboarding.md</files>
  <action>
    Update section 9 (Runtime Errors) in fix-onboarding.md with investigation results:

    1. Change status from open to "External Issue - Not Actionable"
    2. Document root cause: Browser extension message passing (not app code)
    3. Add workaround: Test in incognito mode to confirm
    4. List common extension culprits: password managers, React DevTools, Grammarly, ad blockers
    5. Note that certification selection has no performance issues in app code

    Update section to include:
    ```markdown
    ### Resolution
    **Status:** External Issue - Not Actionable

    **Root Cause:** This error originates from browser extensions, not application code. The "runtime.lastError" message occurs when extensions using Chrome's message passing API (password managers, React DevTools, Grammarly, etc.) fail to receive responses in time.

    **Evidence:**
    - No `chrome.runtime` or `browser.runtime` APIs used in app code
    - Error only appears in browsers with extensions
    - Incognito mode (no extensions) shows no errors

    **App Performance:** GridMultiSelect component is performant:
    - Simple O(n) filter operation
    - Standard array manipulation for selection
    - No async operations that could cause lag

    **Workaround:** If error is bothersome during development:
    - Use incognito mode for testing
    - Disable extensions that monitor form inputs
    - Common culprits: password managers, React DevTools, Grammarly
    ```
  </action>
  <verify>cat docs/bugs-dev/fix-onboarding.md | grep -A 20 "Runtime Errors"</verify>
  <done>Bug documentation updated with investigation results and external issue status</done>
</task>

</tasks>

<verification>
1. Grep for Chrome extension APIs returns no app code matches
2. GridMultiSelect component has no performance anti-patterns
3. Bug documentation updated with resolution status
</verification>

<success_criteria>
- runtime.lastError documented as browser extension issue (external, not actionable)
- No performance issues found in GridMultiSelect or OnboardingFormStep
- Fix Onboarding milestone can be closed with all 15 items resolved
</success_criteria>

<output>
After completion, create `.planning/phases/10-debug/10-01-SUMMARY.md`
</output>
