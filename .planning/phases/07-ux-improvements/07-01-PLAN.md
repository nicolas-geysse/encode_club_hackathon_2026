---
phase: 07-ux-improvements
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - packages/frontend/src/components/chat/GridMultiSelect.tsx
  - packages/frontend/src/components/chat/OnboardingFormStep.tsx
autonomous: true

must_haves:
  truths:
    - "Skills selection shows scrollable grid of clickable chips instead of dropdown"
    - "Certifications selection uses same grid pattern as skills"
    - "Selected items show different visual style (primary color background)"
    - "Counter displays total selected items below grid"
  artifacts:
    - path: "packages/frontend/src/components/chat/GridMultiSelect.tsx"
      provides: "Grid-based multi-select component"
      min_lines: 80
    - path: "packages/frontend/src/components/chat/OnboardingFormStep.tsx"
      provides: "Uses GridMultiSelect for skills and certifications"
      contains: "GridMultiSelect"
  key_links:
    - from: "OnboardingFormStep.tsx"
      to: "GridMultiSelect.tsx"
      via: "import and render in renderField"
      pattern: "import.*GridMultiSelect"
---

<objective>
Create a GridMultiSelect component for skills and certifications selection

Purpose: Replace dropdown-style multi-select with a more intuitive scrollable grid of clickable chips, matching the expected UX from fix-onboarding.md.

Output: New GridMultiSelect component integrated into OnboardingFormStep for skills and certifications steps.
</objective>

<execution_context>
@/home/nico/.claude/get-shit-done/workflows/execute-plan.md
@/home/nico/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@packages/frontend/src/components/chat/OnboardingFormStep.tsx
@packages/frontend/src/lib/chat/stepForms.ts
@docs/bugs-dev/fix-onboarding.md (Section 3: Skills Selection UX)
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create GridMultiSelect component</name>
  <files>packages/frontend/src/components/chat/GridMultiSelect.tsx</files>
  <action>
Create a new SolidJS component `GridMultiSelect` with these specifications:

**Props interface:**
```typescript
interface GridMultiSelectProps {
  /** Available options to display */
  options: string[];
  /** Currently selected items */
  selected: string[];
  /** Callback when selection changes */
  onChange: (selected: string[]) => void;
  /** Placeholder text when no filter input */
  placeholder?: string;
  /** Maximum height for scrollable container (default: 200px) */
  maxHeight?: string;
}
```

**Layout:**
- Responsive grid: `grid-cols-2 sm:grid-cols-3` for 2-3 items per row
- Max height with overflow-y-auto for scrolling
- Gap between items: `gap-2`

**Chip styling:**
- Unselected: `bg-muted border border-border text-foreground hover:bg-muted/80`
- Selected: `bg-primary border border-primary text-primary-foreground`
- Both: `px-3 py-1.5 rounded-lg text-sm cursor-pointer transition-colors truncate`

**Features:**
1. Click to toggle selection (add if not selected, remove if selected)
2. Optional filter input at top to filter visible options
3. Counter below grid: "Selected: X items" (only show when X > 0)
4. Use `For` from solid-js for rendering options

**Do NOT:**
- Use any external UI library
- Add keyboard navigation (keep it simple)
  </action>
  <verify>
File exists and exports `GridMultiSelect` component:
```bash
grep -l "export.*GridMultiSelect" packages/frontend/src/components/chat/GridMultiSelect.tsx
```
  </verify>
  <done>GridMultiSelect component created with grid layout, click-to-toggle, visual states, and counter</done>
</task>

<task type="auto">
  <name>Task 2: Integrate GridMultiSelect into OnboardingFormStep</name>
  <files>packages/frontend/src/components/chat/OnboardingFormStep.tsx</files>
  <action>
Modify OnboardingFormStep.tsx to use GridMultiSelect for skills and certifications:

1. **Add import** at top of file:
```typescript
import GridMultiSelect from './GridMultiSelect';
```

2. **Update renderField switch case** for `'multi-select-pills'`:

Replace the current `case 'multi-select-pills':` block (lines ~830-842) with logic that:
- For skills step (`props.step === 'skills'`): Use `GridMultiSelect` with options from `getSkillsForField(props.fieldOfStudy)`
- For certifications step (`props.step === 'certifications'`): Use `GridMultiSelect` with options from `field.suggestions || []`
- Keep the existing `MultiSelectPills` as fallback for any other multi-select-pills usage

**Implementation:**
```typescript
case 'multi-select-pills': {
  const isSkillsField = props.step === 'skills' && field.name === 'skills';
  const isCertificationsField = props.step === 'certifications' && field.name === 'certifications';

  // Use GridMultiSelect for skills and certifications
  if (isSkillsField || isCertificationsField) {
    const options = isSkillsField
      ? getSkillsForField(props.fieldOfStudy)
      : (field.suggestions || []);

    return (
      <GridMultiSelect
        options={options}
        selected={(value() as string[]) || []}
        onChange={(v) => updateField(field.name, v)}
        placeholder={field.placeholder}
      />
    );
  }

  // Fallback to MultiSelectPills for other uses
  return (
    <MultiSelectPills
      field={field}
      selected={(value() as string[]) || []}
      onChange={(v) => updateField(field.name, v)}
      getSuggestions={undefined}
    />
  );
}
```

**Do NOT:**
- Remove the existing MultiSelectPills component (it may be used elsewhere in future)
- Change the stepForms.ts configuration - the field type remains 'multi-select-pills'
  </action>
  <verify>
Run typecheck to ensure no TypeScript errors:
```bash
cd /home/nico/code_source/perso/encode_club_hackathon_2026 && pnpm typecheck
```
  </verify>
  <done>Skills and certifications steps render with GridMultiSelect instead of dropdown-style pills</done>
</task>

</tasks>

<verification>
1. TypeScript compiles without errors: `pnpm typecheck`
2. Lint passes: `pnpm lint`
3. GridMultiSelect is imported and used in OnboardingFormStep
4. Visual inspection: Navigate to skills step in onboarding, see grid of clickable chips
</verification>

<success_criteria>
- Skills selection shows 2-3 column grid of clickable skill chips
- Certifications selection uses same grid pattern
- Clicking a chip toggles its selection state
- Selected chips have primary color background
- Counter shows "Selected: X items" when items are selected
- No TypeScript or lint errors
</success_criteria>

<output>
After completion, create `.planning/phases/07-ux-improvements/07-01-SUMMARY.md`
</output>
