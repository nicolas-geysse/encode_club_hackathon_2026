---
phase: 08-visual-polish
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - packages/frontend/src/components/chat/OnboardingProgress.tsx
  - packages/frontend/src/components/chat/OnboardingProgress.css
autonomous: true

must_haves:
  truths:
    - "Connector lines between progress steps are clearly visible (not faint)"
    - "Active step dot has a subtle pulse animation with slight enlargement"
    - "Generating Plan step text turns green when reached/complete"
  artifacts:
    - path: "packages/frontend/src/components/chat/OnboardingProgress.tsx"
      provides: "Progress component with conditional green state for plan step"
      contains: "text-green-500"
    - path: "packages/frontend/src/components/chat/OnboardingProgress.css"
      provides: "Keyframe animation for step pulse effect"
      contains: "@keyframes subtle-pulse"
  key_links:
    - from: "OnboardingProgress.tsx"
      to: "OnboardingProgress.css"
      via: "CSS import and class application"
      pattern: "step-active|subtle-pulse"
---

<objective>
Enhance the 4-step progress indicator with better visual feedback: more visible connector lines, pulse animation on active step, and green completion state for "Generating Plan".

Purpose: Users currently cannot easily see which step they're on or when the plan generation is complete. Visual polish improves onboarding UX.
Output: Progress indicator with clear connector lines, animated active state, and green completion styling.
</objective>

<execution_context>
@/home/nico/.claude/get-shit-done/workflows/execute-plan.md
@/home/nico/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@packages/frontend/src/components/chat/OnboardingProgress.tsx
@packages/frontend/src/components/chat/OnboardingProgress.css
</context>

<tasks>

<task type="auto">
  <name>Task 1: Add pulse animation and improve line visibility in CSS</name>
  <files>packages/frontend/src/components/chat/OnboardingProgress.css</files>
  <action>
Add the subtle-pulse keyframe animation at the end of the CSS file:

```css
/* Active Step Pulse Animation */
@keyframes subtle-pulse {
  0%, 100% {
    transform: scale(1);
    box-shadow: 0 0 0 0 rgba(59, 130, 246, 0.4);
  }
  50% {
    transform: scale(1.1);
    box-shadow: 0 0 0 8px rgba(59, 130, 246, 0);
  }
}

.step-active {
  animation: subtle-pulse 2s ease-in-out infinite;
}
```

Note: The actual pulse will be applied via Tailwind inline classes in the TSX file, but define this CSS class as a fallback/reference.
  </action>
  <verify>
Check CSS file contains @keyframes subtle-pulse definition:
```bash
grep -q "subtle-pulse" packages/frontend/src/components/chat/OnboardingProgress.css && echo "PASS: Animation defined"
```
  </verify>
  <done>CSS file contains subtle-pulse keyframe animation definition</done>
</task>

<task type="auto">
  <name>Task 2: Update progress component with pulse and green completion state</name>
  <files>packages/frontend/src/components/chat/OnboardingProgress.tsx</files>
  <action>
Modify OnboardingProgress.tsx with these changes:

1. **Improve connector line visibility** (line 46):
   Change from `bg-border/50` to `bg-border` (full opacity for better visibility)
   Also increase width from `w-px` to `w-0.5` (2px)

2. **Add pulse animation to active step dot** (around line 77-84):
   When status() === 'current', add inline animation style to the dot div.
   Add this CSS animation inline for the current step dot:
   ```jsx
   style={status() === 'current' ? {
     animation: 'subtle-pulse 2s ease-in-out infinite'
   } : undefined}
   ```

3. **Add green completion state for "Generating Plan"** (around line 63-71):
   Modify the label div class logic to detect when step.id === 'plan' AND status() is 'current' or 'done':
   - Add condition: if step.id === 'plan' and (status() === 'current' || index() < getCurrentIndex())
   - Apply green color: `text-green-500` instead of normal current/done styling

   Update the conditional class logic:
   ```tsx
   class={`text-right text-sm font-medium transition-colors duration-300 ${
     step.id === 'plan' && (status() === 'current' || status() === 'done')
       ? 'text-green-500 font-semibold'
       : status() === 'current'
         ? 'text-primary scale-105 origin-right'
         : status() === 'done'
           ? 'text-muted-foreground'
           : 'text-muted-foreground/40'
   }`}
   ```

4. **Also make the dot green for "Generating Plan"**:
   In the dot indicator section, add similar condition for green dot:
   ```tsx
   class={`rounded-full transition-all duration-500 z-10 ${
     step.id === 'plan' && (status() === 'current' || status() === 'done')
       ? 'w-3 h-3 bg-green-500 ring-4 ring-green-500/20'
       : status() === 'current'
         ? 'w-3 h-3 bg-primary ring-4 ring-primary/20'
         : status() === 'done'
           ? 'w-2.5 h-2.5 bg-primary/60'
           : 'w-2 h-2 bg-muted-foreground/30'
   }`}
   ```
  </action>
  <verify>
1. Check connector line has better visibility:
```bash
grep -q "w-0.5 bg-border" packages/frontend/src/components/chat/OnboardingProgress.tsx && echo "PASS: Line visibility improved"
```

2. Check green state exists:
```bash
grep -q "text-green-500" packages/frontend/src/components/chat/OnboardingProgress.tsx && echo "PASS: Green text state added"
```

3. Run dev server and navigate to onboarding to visually verify:
- Connector lines are clearly visible
- Current step dot pulses
- "Generating Plan" step shows green when active/complete
  </verify>
  <done>
Progress indicator shows: (1) visible connector lines, (2) pulsing active step, (3) green "Generating Plan" state when reached
  </done>
</task>

</tasks>

<verification>
1. Visual check: Connector lines between steps are clearly visible (not faint/transparent)
2. Visual check: Active step dot has subtle pulse animation (scale + shadow oscillation)
3. Visual check: When user reaches "Generating Plan" step, text and dot turn green
4. No TypeScript errors: `pnpm --filter @stride/frontend typecheck`
</verification>

<success_criteria>
- Connector lines use `bg-border w-0.5` for visibility
- Active step has pulse animation via inline style
- "Generating Plan" step shows `text-green-500` and green dot when current/done
- No regression in existing progress indicator functionality
</success_criteria>

<output>
After completion, create `.planning/phases/08-visual-polish/08-01-SUMMARY.md`
</output>
