---
phase: 03-embed-route
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - packages/frontend/src/routes/embed/swipe.tsx
  - packages/frontend/src/components/tabs/SwipeTab.tsx
autonomous: true

must_haves:
  truths:
    - "Visiting /embed/swipe renders functional SwipeTab component"
    - "Embed route displays no header, sidebar, or navigation elements"
    - "SwipeTab respects embedMode prop for iframe context behavior"
  artifacts:
    - path: "packages/frontend/src/routes/embed/swipe.tsx"
      provides: "Standalone embed route for SwipeTab"
      min_lines: 15
    - path: "packages/frontend/src/components/tabs/SwipeTab.tsx"
      provides: "SwipeTab with embedMode prop"
      contains: "embedMode"
  key_links:
    - from: "packages/frontend/src/routes/embed/swipe.tsx"
      to: "SwipeTab"
      via: "import and render with embedMode=true"
      pattern: "embedMode.*true"
---

<objective>
Create standalone `/embed/swipe` route that renders SwipeTab without navigation chrome for iframe embedding.

Purpose: Enable chat to embed the swipe experience in an iframe on desktop without the full app layout.
Output: New embed route file and SwipeTab component updated with embedMode prop.
</objective>

<execution_context>
@/home/nico/.claude/get-shit-done/workflows/execute-plan.md
@/home/nico/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/02-ui-resource/02-01-SUMMARY.md

Key facts from prior phases:
- Phase 2 added UIResource with embedUrl: '/embed/swipe'
- SwipeTab is at packages/frontend/src/components/tabs/SwipeTab.tsx
- SolidStart uses file-based routing in src/routes/
- Route at /embed/swipe needs file at src/routes/embed/swipe.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Add embedMode prop to SwipeTab component</name>
  <files>packages/frontend/src/components/tabs/SwipeTab.tsx</files>
  <action>
Add `embedMode?: boolean` prop to SwipeTabProps interface (after profileId line).

In the component return statement, when embedMode is true:
- Remove outer padding from the wrapping div (change `class="p-6"` to `class={embedMode ? 'p-2' : 'p-6'}`)
- This reduces chrome for iframe context while keeping functionality intact

No other behavior changes needed - the component already handles all swipe logic. The embedMode prop is a simple styling adjustment for iframe fit.
  </action>
  <verify>
Run `pnpm typecheck` from monorepo root - no type errors
Grep for `embedMode` in SwipeTab.tsx to confirm prop added
  </verify>
  <done>
SwipeTab accepts embedMode prop and conditionally applies reduced padding when true
  </done>
</task>

<task type="auto">
  <name>Task 2: Create /embed/swipe route</name>
  <files>packages/frontend/src/routes/embed/swipe.tsx</files>
  <action>
Create new file at packages/frontend/src/routes/embed/swipe.tsx:

```tsx
/**
 * Embed Swipe Route (/embed/swipe)
 *
 * Standalone route for embedding SwipeTab in an iframe.
 * No header, sidebar, or navigation - just the swipe component.
 */

import { SwipeTab } from '~/components/tabs/SwipeTab';
import { useProfile } from '~/lib/profileContext';

export default function EmbedSwipePage() {
  const { profile } = useProfile();

  return (
    <div class="h-screen overflow-auto bg-background">
      <SwipeTab
        embedMode={true}
        currency={profile()?.currency}
        profileId={profile()?.id}
        // Skills, items, lifestyle from profile context - defaults work for embed
      />
    </div>
  );
}
```

Key points:
- No layout wrapper (bypasses app shell with header/sidebar)
- Uses profileContext to get active profile data
- Passes embedMode=true to SwipeTab for reduced padding
- Full height with scrollable overflow for iframe behavior
- Minimal dependencies - just what SwipeTab needs
  </action>
  <verify>
Run `pnpm dev` from frontend package
Visit http://localhost:3006/embed/swipe - should render SwipeTab without app chrome
Check browser dev tools - no console errors
  </verify>
  <done>
Route exists at /embed/swipe and renders SwipeTab without header/sidebar/navigation
  </done>
</task>

</tasks>

<verification>
After both tasks complete:
1. `pnpm typecheck` passes with no errors
2. Visit http://localhost:3006/embed/swipe - SwipeTab renders
3. Compare to http://localhost:3006/plan?tab=swipe - embed has no header/sidebar
4. SwipeTab "Roll the Dice" button is functional in embed mode
</verification>

<success_criteria>
- `/embed/swipe` route exists and renders SwipeTab
- No header, sidebar, or navigation visible on embed route
- SwipeTab component has embedMode prop and uses it for styling
- All three phase success criteria from ROADMAP are satisfied
</success_criteria>

<output>
After completion, create `.planning/phases/03-embed-route/03-01-SUMMARY.md`
</output>
