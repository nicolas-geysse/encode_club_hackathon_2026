# Milestone v2.1: Bugfixes

**Status:** ✅ SHIPPED 2026-01-31
**Phases:** 11-15
**Total Plans:** 5

## Overview

v2.1 Bugfixes — Fix critical bugs discovered during demo testing. Phases 11-15 continue from v2.0 milestone.

## Phases

### Phase 11: Chart Rendering

**Goal**: Quick links render actual chart visualizations instead of text-only responses
**Depends on**: Nothing (first phase)
**Requirements**: CHRT-01, CHRT-02, CHRT-03
**Plans**: 1 plan

Plans:
- [x] 11-01-PLAN.md — Add 4th quick link and fix chartType-to-action mapping

**Details:**
Added `__action:` prefix pattern to bypass intent detection. Quick links now directly trigger chart rendering:
- Budget → show_budget_chart → Monthly Budget Breakdown
- Goals → show_projection_chart → Goal Projection
- Energy → show_energy_chart → Energy Timeline
- Savings → show_progress_chart → Savings Progress

### Phase 12: Form Fixes

**Goal**: Fix form serialization and currency issues
**Depends on**: Nothing
**Requirements**: FORM-01, FORM-02
**Plans**: 1 plan

Plans:
- [x] 12-01-PLAN.md — Fix subscription, inventory, and trade message formatting

**Details:**
Fixed subscription `[object Object]` display bug. Added dynamic currency symbols using `getCurrencySymbolForForm()` for inventory items and trade opportunities.

### Phase 13: State Persistence

**Goal**: Onboarding completion state survives navigation
**Depends on**: Nothing
**Requirements**: STAT-01, STAT-02
**Plans**: 1 plan

Plans:
- [x] 13-01-PLAN.md — Fix SSR hydration bug in onboardingStateStore

**Details:**
Established hydration-safe localStorage initialization pattern. Added `initOnboardingState()` function called from entry-client before mount, matching theme initialization approach.

### Phase 14: UI Fixes

**Goal**: Fix button placement and dark mode visibility
**Depends on**: Nothing
**Requirements**: PLAC-01, PLAC-02, DARK-01, DARK-02
**Plans**: 1 plan

Plans:
- [x] 14-01-PLAN.md — Fix button placement and dark mode visibility

**Details:**
Moved "Start My Plan" button from sidebar/mobile areas to chat completion message. Fixed dark mode visibility using emerald gradient (from-emerald-500 to-emerald-600) for Bruno avatar and progress indicator pulse animation.

### Phase 15: GridMultiSelect Fixes

**Goal**: Fix column widths and option stability
**Depends on**: Nothing
**Requirements**: GRID-01, GRID-02, GRID-03
**Plans**: 1 plan

Plans:
- [x] 15-01-PLAN.md — Fix GridMultiSelect variant, text truncation, and container width

**Details:**
Added variant prop ('default' | 'wide') to GridMultiSelect. Default uses fewer columns (grid-cols-1 sm:grid-cols-2), wide uses more (grid-cols-2 sm:grid-cols-3 md:grid-cols-4). Replaced truncate with whitespace-normal for full text display. Certifications container widened to max-w-2xl.

---

## Milestone Summary

**Key Decisions:**
- Use `__action:` prefix to bypass intent detection for reliable chart rendering
- Emerald color palette for dark mode visibility (replaces primary which becomes white)
- Hydration-safe pattern: explicit init function called from entry-client
- GridMultiSelect variant prop for flexible column layouts

**Issues Resolved:**
- Charts not rendering in quick links (only text responses)
- Subscription form showing `[object Object]`
- Currency hardcoded to $ on inventory/trade steps
- Onboarding state resetting on navigation
- "Start My Plan" button in wrong location
- Bruno avatar and progress pulse invisible in dark mode
- Skills list truncation and empty state issues

**Issues Deferred:**
- None

**Technical Debt Incurred:**
- None

---

_For current project status, see .planning/ROADMAP.md_
